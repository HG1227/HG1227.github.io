---
layout: post
title:  假设检验之——T检验
date:   2020-05-15
categories: math 
tags: T检验
---
* content
{:toc}
假设检验也叫显著性检验，是以小概率反证法的逻辑推理，判断假设是否成立的统计方法，它首先假设样本对应的总体参数（或分布）与某个已知总体参数（或分布）相同，然后根据统计量的分布规律来分析样本数据，利用样本信息判断是否支持这种假设，并对检验假设做出取舍抉择，做出的结论是概率性的，不是绝对的肯定或否定。















# T检验的概念

**T检验**：亦称student t检验（Student's t test），主要用于样本含量较小（例如n<30），总体标准差σ未知的[正态分布](http://wiki.mbalib.com/wiki/正态分布)资料。

**T检验** 是用于小样本（[样本容量](http://wiki.mbalib.com/wiki/样本容量)小于30）的两个平均值差异程度的检验方法。它是用T分布理论来推断差异发生的概率，从而判定两个平均数的差异是否显著。

**T检验的用途**：（1）样本均数与群体均数的比较；（2）两样本均数的比较。



# 单个样本的T检验

**此种用样本量较少的正态检验，一般n在30左右。**

- 目的：检验单样本的均值是否和已知总体的均值相等。

- 统计公式


$$
\begin{equation}t=\frac{\bar{x}-\mu_{0}}{s / \sqrt{n}} \quad\left(\bar{x}: \text { 总体均数, } \quad \mu_{0} \quad: \text { 样本均值, } \quad \text { s: } \text { 样本标准差, } \quad \text { n:总数 }\right)\end{equation}
$$


自由度 $V=n-1$ 

- 假设总体均数和样本均数相近，或者无差别。设定检验水平 $\alpha$=0.05（一般用0.05）
- 查t界值表，根据自由度，检验水平，确定对应的 $t1$ 值，若 $t1>t$ 值，则在 $\alpha$ 水平下，不拒绝原假设。否则拒绝原假设。



适用条件：

　　(1) 已知一个总体均数；

　　(2) 可得到一个样本均数及该样本标准误；

　　(3) **样本来自正态或近似正态总体**。

- 应用场景举例：

1. 从某厂生产的零件中随机抽取若干件，检验其某种规格的均值是否与要求的规格相等（双侧检验）
2. 在某偏远地区随机抽取若干健康男子，检验其脉搏均数是否高于全体健康男子平均水平（单侧检验）
3. 检验某一线城市全体高三学生视力水平是否比全国全体高三学生视力水平低（单侧检验）

- 检验原理：
  ![[公式]](https://www.zhihu.com/equation?tex=H_0)：样本均值与总体均值相等
  ![[公式]](https://www.zhihu.com/equation?tex=H_1)：样本均值与总体均值不等

在![[公式]](https://www.zhihu.com/equation?tex=H_0)成立的条件下，![[公式]](https://www.zhihu.com/equation?tex=%5Cbar+X-%5Cmu%3D0)，若上述统计量的值偏离0“太多”，是小概率事件，在一次抽样中几乎不可能发生，其发生的概率即为![[公式]](https://www.zhihu.com/equation?tex=p)值。给定显著性水平![[公式]](https://www.zhihu.com/equation?tex=%5Calpha)（如0.05），根据研究的问题确定是双侧检验（two-side test）还是单侧检验（one-side test），若为双侧检验，则查t界值表中自由度为![[公式]](https://www.zhihu.com/equation?tex=n-1)，双侧![[公式]](https://www.zhihu.com/equation?tex=%5Calpha)，得到临界值![[公式]](https://www.zhihu.com/equation?tex=t_%7B%5Cfrac%7B%5Calpha%7D%7B2%7D%2Cn-1%7D)；若为单侧检验，则查t界值表中自由度为![[公式]](https://www.zhihu.com/equation?tex=n-1)，双侧![[公式]](https://www.zhihu.com/equation?tex=%5Calpha)，得到临界值![[公式]](https://www.zhihu.com/equation?tex=t_%7B%5Calpha%2Cn-1%7D)。

1. 对于**要检验样本均值是否等于总体均值的双侧检验**，若根据样本数据算出来的![[公式]](https://www.zhihu.com/equation?tex=t)统计量的绝对值![[公式]](https://www.zhihu.com/equation?tex=%5Cleft%7C%5Cfrac%7B%5Csqrt+n%28%5Cbar+X-%5Cmu%29%7D%7Bs%7D%5Cright%7C%3Et_%7B%5Cfrac%7B%5Calpha%7D%7B2%7D%2Cn-1%7D)，则拒绝原假设，认为样本均值与总体均值不等，否则不拒绝原假设。
2. 对于**要检验样本均值是否比总体均值大的单侧检验**，若根据样本数据算出来的![[公式]](https://www.zhihu.com/equation?tex=t)统计量![[公式]](https://www.zhihu.com/equation?tex=%5Cfrac%7B%5Csqrt+n%28%5Cbar+X-%5Cmu%29%7D%7Bs%7D%3Ct_%7B%7B%5Calpha%7D%2Cn-1%7D+)，则拒绝原假设，认为样本均值不大于总体均值，否则不拒绝原假设。
3. 对于**要检验样本均值是否比总体均值小的单侧检验**，若根据样本数据算出来的![[公式]](https://www.zhihu.com/equation?tex=t)统计量![[公式]](https://www.zhihu.com/equation?tex=%5Cfrac%7B%5Csqrt+n%28%5Cbar+X-%5Cmu%29%7D%7Bs%7D%3Et_%7B%7B%5Calpha%7D%2Cn-1%7D)，则拒绝原假设，认为样本均值不小于总体均值，否则不拒绝原假设。

## 单个样本的t检验实例分析

例1 难产儿出生体重  $n=35, \bar{X}=3.42, S=0.40$ 

　　一般婴儿出生体重 $\mu_{0}=3.30$（大规模调查获得），问相同否？

解：

1.建立假设、确定检验水准 $\alpha$ 

- $H_{0}: \mu=\mu_{0}$ 难产儿与一般婴儿出生体重的总均数相等；$H_{0}$无效假设，null hypothesis）

- $H_{1}: \mu \neq \mu_{0}$ （难产儿与一般婴儿出生体重的总均数不等；$H_{1}$备择假设，alternative hypothesis，）

- 双侧检验，检验水准:α = 0.05



 2.计算检验统计量

</br>




$$
\begin{equation}t=\frac{\bar{X}-\mu_{0}}{S / \sqrt{n}}=\frac{3.42-3.30}{0.40 / \sqrt{35}}=1.77, v=n-1=35-1=34\end{equation}
$$


</br>

3.查相应界值表，确定P值，下结论

查附表1: $t_{0.05/ 2.34} =2.032, t=1.77, t<t_{0.05 / 2.34}, P>0.05$ , 按α = 0.05水准，不拒绝*H*0，两者的差别无统计学意义，尚不能认为难产儿平均出生体重与一般婴儿的出生体重不同

<center> <img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200515095623.jpg" height="80%" width="80%"></center>
# 配对样本T检验

- 确定假设理论： $\mu_{1}=\mu_{0}$ 即2个总体平均数没有差异

- 计算 $T$ 值：
  方式一：总体中小样本的平均值 与 总体平均值的差异：

  </br>
  $$
  \begin{equation}t=\frac{\bar{x}-\mu_{0}}{\sqrt{\frac{S}{n-1}}}\end{equation}
  $$
  </br>

  

  方式二：判断2组样本之间平均数的差异程度：

  </br>
  $$
  \begin{equation}t=\frac{\bar{X}_{1}-\bar{X}_{2}}{\sqrt{\frac{\Sigma x_{1}^{2}+\Sigma x_{2}^{2}}{n_{1}+n_{2}-2} * \frac{n_{1}+n_{2}}{n_{1} * n_{2}}}}\end{equation}
  $$
  </br>

- 自由度 $V=n-1$

- 查表看P值

# 计算置信区间

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200515100412.jpg"></center>
<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200515100534.jpg
"></center>

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200515100551.jpg"></center> 
参考

1. <a href="https://zhuanlan.zhihu.com/p/29284854" blank="">T检验分析</a>
2. <a href="https://zhuanlan.zhihu.com/p/30974496" blank="">检验：卡方、T检验</a>
3. <a href="https://www.jianshu.com/p/46d9b111dffc" blank="">（二）假设检验之——T检验</a> 
4. <a href="https://wenku.baidu.com/view/4616dbeb4afe04a1b071de67.html" blank="">t检验</a> 
5. <a href="https://zhuanlan.zhihu.com/p/138711532?utm_source=ZHShareTargetIDMore&utm_medium=social&utm_oi=935643310962458624" blank="">一文详解t检验</a> 

