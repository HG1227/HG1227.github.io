---
layout: post
title:  分类数据分析
date:   2020-02-17
categories: statistics
tags:  分类数据分析
---
* content
{:toc}










## 分类数据分析

在上一章中介绍了两个体比例之差的检验, 如果对更多的总体比例进行比较, 则需要采用本章介绍的方法。**对分类数据**进行分析的统计方法主要是利用 $\chi^2$ 分布,许多教材又将其称为 $\chi^2$ 检验。 $\chi^2$ 检验的应用主要表现在两个方面: 拟合优度检验和独立性检验。**列联表是进行独性检验的重要工具**。

## 分类数据

分类数据是对事物进行分类的结果，其特征是，调查结果虽然用数值表示，但不同数值描述了调查对象的不同特征。例如，研究青少年家庭状况与行为之间的关系，青少年家庭状况是一个分类数据，可以分为“完整家庭”和“离异家庭”，如果调查结果为“1”，则表示被调查者来自完整家庭，调查结果为“2”， 则表示被调查者来自离异家庭。青少年行为也可以分为两类，“犯罪”和“未犯罪”，分别用 “1” 和 “2” 表示。对这类题是在汇总数据的基础上进行分析的，数据汇总的结果表现为频数。

由上述内容可知，**分类数据的结果是频数**， $\chi^2$ 检验是对分类数据的频数进行分析的统计方法。

##  卡方统计量

 $\chi^2$ 可以用于**测定两个分类变量之间的相关程度**。若用 $f_o$ 表示观察值频数(observed frequency),用$f_e$,表示期望值频数(expected frequency),  则 $\chi^2$ 统计量可以写为:


$$
\begin{equation}\chi^{2}=\sum \frac{\left(f_{o}-f_{e}\right)^{2}}{f_{e}}\end{equation}
$$


 $\chi^2$ 统计量有如下特征:

-  $\chi^2$ ≥0,因为它是对平方结果的汇总
-  $\chi^2$ 统计量的分布与自由度有关
-  $\chi^2$ 统计量描述了观察值与期望值的接近程度。

两者越接近，即 $f_o -f_e$ 的绝对值越小，计算出的 $\chi^2$ 值就越小; 反之， $f_o -f_e$ 的绝对值越大, 大，计算出的 $\chi^2$ 值也越大。 $\chi^2$ 检验正是通过对 $\chi^2$ 的计算结果与 $\chi^2$ 分布中的临界值进行比较，做出是否拒绝原假设的统计决策。

 $\chi^2$ 分布与自由度的关系

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200610220035.png"/></center>
自由度越小, 分布就越向左倾斜，随着自由度的增加, $\chi^2$ 分布的倾斜程度趋于缓解, 逐渐显露出对称性, 随着自由度继续增大,卡方分布将趋于对称的正态分布。

利用  $\chi^2$  分布，可以对分类数据进行拟合优度检验和独立性检验

## 拟合优度检验

拟合优度检验(goodnessoffittest) 是用  $\chi^2$  统计量进行统计显著性检验的重要内容之一。它是依据总体分布状况，计算出分类变量中各**类别的期望频数**，与**分布的观察频数**进行对比，判断期望频数与观察频数是否有显著差异，从而达到对分类变量进行分析的目的。

例如，在泰坦尼克号的例子中，我们关注在这次海难中，幸存者的性别是否有显著差异。当时船上共有2 208人，其中男性1 738 人，女性470人。海难发生后，幸存者共718人，其中男性374人，女性344人。海难后存活比率为 $718/2 208=0. 325$。如果是否活下来与性别没有关系，那么按照这个比率，在1 738位男性中应该存活 $1738*0. 325=565$人，在470位女性中应该存活 $470* 0.325=153$人。**565和153就是期望频数**，而**实际存活结果就是观察频数**。通过期望频数和观察频数的比较，能够从统计角度做出存活与性别是否有关的判断。

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200610221716.png"/></center>
对总体比例的检验，也可以采用拟合优度的方法。

例如

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200610222355.png"/></center>
采用拟合优度的方法。

<center><img src="https://raw.githubusercontent.com/HG1227/image/master/img_tuchuang/20200610222643.png"/></center>
## 列联分析：独立性检验

拟合优度检验是对一个分类变量的检验，有时我们会遇到两个分类变量的问题，看这两个分类变量是否存在联系。例如原料有不同的等级，原料又产自不同的地区。原料等级和原料生产地就是两个分类变量。我们关心这两者是否有关联，是不是某些地区生产的原料有更好的质量。对于两个分类变量的分析，称为独立性检验，分析过程可以通过列联表的方式呈现，故有人把这种分析称为 {% em type="green" %}列联分析{% endem %}。 